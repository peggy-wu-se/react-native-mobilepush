
buildscript {
    repositories {
        def ALIYUN_REPOSITORY_URL = 'https://maven.aliyun.com/repository/google'
        def ALIYUN_JCENTER = 'https://maven.aliyun.com/repository/public'
        def ALIYUN_JCENTER_URL = 'https://maven.aliyun.com/repository/jcenter'
        maven {url ALIYUN_REPOSITORY_URL}
        maven {url ALIYUN_JCENTER}
        maven {url ALIYUN_JCENTER_URL}

        google()
        //jcenter()
    }

    dependencies {
//        classpath 'com.android.tools.build:gradle:1.3.1'
        classpath("com.android.tools.build:gradle:3.5.3")
    }
}

apply plugin: 'com.android.library'

android {
    compileSdkVersion 29
    buildToolsVersion "29.0.2"

    defaultConfig {
        minSdkVersion 16
        targetSdkVersion 29
        versionCode 1
        versionName "1.0"

        ndk {
            //选择要添加的对应cpu类型的.so库。此处仅为示意，推送支持所有主流类型，请根据设备硬件选择
            abiFilters 'armeabi', 'x86'
        }
//         manifestPlaceholders=[
//           pushKey:"$pushKey",
//           pushSecret:"$pushSecret",
//           xiaomiId:"$xiaomiId",
//           xiaomiKey:"$xiaomiKey",
//           huaweiAppId:"$huaweiAppId",
//         ]
    }
    lintOptions {
        abortOnError false
    }
}

repositories {
    def ALIYUN_REPOSITORY_URL = 'https://maven.aliyun.com/repository/google'
    def ALIYUN_JCENTER = 'https://maven.aliyun.com/repository/public'
    def ALIYUN_JCENTER_URL = 'https://maven.aliyun.com/repository/jcenter'
    maven {url ALIYUN_REPOSITORY_URL}
    maven {url ALIYUN_JCENTER}
    maven {url ALIYUN_JCENTER_URL}
    whenObjectAdded { repo ->
        if(repo instanceof MavenArtifactRepository){
            println('----whenObjectAdded:'+repo.url+';'+repo.name+';'+project.name)
            def url = repo.url.toString()
            if (url.startsWith('https://maven.google.com') ||
                    url.startsWith('https://jcenter.bintray.com')) {
                //project.logger.lifecycle "Repository ${repo.url} replaced by $ALIYUN_REPOSITORY_URL."
                remove repo
            }
        }
    }
    maven {
        url 'http://maven.aliyun.com/nexus/content/repositories/releases/'
    }
    // 配置HMS Core SDK的Maven仓地址。
    maven {
        url 'https://developer.huawei.com/repo/'
    }
    mavenCentral()
}

dependencies {
    implementation 'com.facebook.react:react-native:+'
    api 'com.aliyun.ams:alicloud-android-push:3.4.0'
    api 'com.aliyun.ams:alicloud-android-third-push-huawei:3.4.0'
//    implementation 'com.aliyun.ams:alicloud-android-third-push-oppo:3.4.0'
    api 'com.aliyun.ams:alicloud-android-third-push-xiaomi:3.4.0'
//    implementation 'com.aliyun.ams:alicloud-android-third-push-vivo:3.4.0'
    //implementation 'com.aliyun.ams:alicloud-android-third-push:3.7.7'
}
